<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>HW1</title>
</head>
    <style>
        body{
            margin:0;
            padding:0;
        }
        .text{
            font-size: 40px;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            flex-direction: column;
        }
        .hide{
            display: none;
        }


    </style>
<body>
         <div class="text">畫面變色時請點擊
            <div><button class="hide">再玩一次</button></div>
         </div>
      <script>
             //預設一開始時間為0
             let startTime = 0

             //計時器為0
             let timer = 0

             //遊戲還未結束
             let isOver = false

           
            function startGame(){
               startTime = 0;
               isOver=false;
               document.querySelector('body').style.background = "white"
               timer = setTimeout(() => {
                 document.querySelector('body').style.background = 'orange'
                 startTime = new Date() 
                },Math.random()*2000+1000)
            }

            startGame()

            //點選網頁的任何一處
            document.addEventListener('click', function() {
             //點了即代表遊戲結束,遊戲結束為正確,再點一次畫面,不會有任何反應
             if (isOver) return
             if (startTime !==0) {
                clearTimeout(timer)
                alert('還沒變色喔，失敗！')
            } else {
                alert('你的成績：' + ((new Date() - startTime) / 1000).toFixed(2) + '秒')
            }
            isOver = true
            //按鈕顯示
            document.querySelector('button').classList.toggle('hide')
            })


            document.querySelector('button').addEventListener('click',(e) =>{
               //按鈕隱藏
               document.querySelector('button').classList.toggle('hide')
               startGame()
               //事件傳遞被停止,不會再把事件傳遞給下一個節點
               e.stopPropagation()
            })



      </script>
</body>
</html>